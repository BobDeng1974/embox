package embox.driver.audio

@BuildDepends(third_party.bsp.st_f4.core)
module stm32f4 {
	option number log_level = 1

	option number volume=70
	option number sample_rate=44100

	@IncludePath("$(EXTERNAL_BUILD_DIR)/third_party/bsp/st_f4/core/STM32F4xx_Ethernet_Example/Utilities/STM32F4-Discovery/")
	source "stm32f4_audio.c"

	depends embox.compat.posix.util.sleep
	depends embox.driver.audio.portaudio_lib
	depends embox.driver.audio.audio_dev
}

@BuildDepends(third_party.bsp.stmf4cube.stm32f4_discovery_audio)
module stm32_audio_f4 {
	option number log_level = 1
	option number volume=70
	option number sample_rate=44100

	@IncludeExport(path="drivers/audio", target_name="stm32_audio.h")
	source "stm32_audio_f4.h"

	@IncludePath("$(EXTERNAL_BUILD_DIR)/third_party/bsp/stmf4cube/core/STM32Cube_FW_F4_V1.13.0/Drivers/STM32F3xx_HAL_Driver/Inc/")
	source "stm32_audio_out.c"

	depends embox.compat.posix.util.sleep
	depends embox.driver.audio.portaudio_lib
	depends embox.driver.audio.audio_dev
}

@BuildDepends(third_party.bsp.stmf7cube.stm32f7_discovery_audio)
@BuildDepends(third_party.bsp.stmf7cube.core)
module stm32_audio_f7 {
	option number log_level = 1
	option number volume=70
	option number sample_rate=44100

	@IncludeExport(path="drivers/audio", target_name="stm32_audio.h")
	source "stm32_audio_f7.h"

	source "stm32_audio_out.c"
	source "stm32_audio_in.c"

	depends embox.compat.posix.util.sleep
	depends embox.driver.audio.portaudio_lib
	depends embox.driver.audio.audio_dev
}
